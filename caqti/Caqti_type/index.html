<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Caqti_type (caqti.Caqti_type)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">caqti</a> &#x00BB; Caqti_type</nav><h1>Module <code>Caqti_type</code></h1><p>Type descriptors for fields and tuples.</p><nav class="toc"><ul><li><a href="#primitive-field-types">Primitive Field Types</a></li><li><a href="#row_types">Row Types</a></li></ul></nav></header><section><header><h3 id="primitive-field-types"><a href="#primitive-field-types" class="anchor"></a>Primitive Field Types</h3><p>The following is normally only needed for drivers and to define new field types. Everything needed for common usage is covered in <a href="index.html#row_types"><span>Row Types</span></a>.</p></header><dl><dt class="spec type" id="type-field"><a href="#type-field" class="anchor"></a><code><span class="keyword">type</span> <span>'a field</span></code><code> = </code><code>..</code></dt><dd><p>An extensible type describing primitive SQL types and types which can be converted to and from such types. When adding a new constructor, register the coding with <a href="Field/index.html#val-define_coding"><code>Field.define_coding</code></a> if possible. Otherwise, the type will only work with drivers which handle it themselves. The shipped drivers only handle the constructors listed here.</p></dd></dl><dl><dt class="spec extension"><code><span class="keyword">type</span> <a href="index.html#type-field">field</a> += </code><code><span class="extension">Bool</span> : <span>bool <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Int</span> : <span>int <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Int32</span> : <span>int32 <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Int64</span> : <span>int64 <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Float</span> : <span>float <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">String</span> : <span>string <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Octets</span> : <span>string <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Pdate</span> : <span>Ptime.t <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Ptime</span> : <span>Ptime.t <a href="index.html#type-field">field</a></span></code><code> | </code><code><span class="extension">Ptime_span</span> : <span>Ptime.span <a href="index.html#type-field">field</a></span></code></dt><dd><p>Primitive field types handled by the shipped drivers.</p></dd></dl><dl><dt class="spec module" id="module-Field"><a href="#module-Field" class="anchor"></a><code><span class="keyword">module</span> <a href="Field/index.html">Field</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Facilities for extending and using primitive field types.</p></dd></dl></section><section><header><h3 id="row_types"><a href="#row_types" class="anchor"></a>Row Types</h3></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>_ t</span></code><code> = <span class="keyword">private</span> </code><table class="variant"><tr id="type-t.Unit" class="anchored"><td class="def constructor"><a href="#type-t.Unit" class="anchor"></a><code>| </code><code><span class="constructor">Unit</span> : <span>unit <a href="index.html#type-t">t</a></span></code></td></tr><tr id="type-t.Field" class="anchored"><td class="def constructor"><a href="#type-t.Field" class="anchor"></a><code>| </code><code><span class="constructor">Field</span> : <span><span class="type-var">'a</span> <a href="index.html#type-field">field</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></td></tr><tr id="type-t.Option" class="anchored"><td class="def constructor"><a href="#type-t.Option" class="anchor"></a><code>| </code><code><span class="constructor">Option</span> : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-t">t</a></span></code></td></tr><tr id="type-t.Tup2" class="anchored"><td class="def constructor"><a href="#type-t.Tup2" class="anchor"></a><code>| </code><code><span class="constructor">Tup2</span> : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></td></tr><tr id="type-t.Tup3" class="anchored"><td class="def constructor"><a href="#type-t.Tup3" class="anchor"></a><code>| </code><code><span class="constructor">Tup3</span> : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'c</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="index.html#type-t">t</a></span></code></td></tr><tr id="type-t.Tup4" class="anchored"><td class="def constructor"><a href="#type-t.Tup4" class="anchor"></a><code>| </code><code><span class="constructor">Tup4</span> : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'c</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'d</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>)</span> <a href="index.html#type-t">t</a></span></code></td></tr><tr id="type-t.Custom" class="anchored"><td class="def constructor"><a href="#type-t.Custom" class="anchor"></a><code>| </code><code><span class="constructor">Custom</span> : </code><code>{</code><table class="record"><tr id="type-t.rep" class="anchored"><td class="def field"><a href="#type-t.rep" class="anchor"></a><code>rep : <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span>;</code></td></tr><tr id="type-t.encode" class="anchored"><td class="def field"><a href="#type-t.encode" class="anchor"></a><code>encode : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, string)</span> Stdlib.result</span>;</code></td></tr><tr id="type-t.decode" class="anchored"><td class="def field"><a href="#type-t.decode" class="anchor"></a><code>decode : <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, string)</span> Stdlib.result</span>;</code></td></tr></table><code>}</code><code> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></td></tr></table></dt><dd><p>Type descriptor for row types.</p><p><b>Note.</b> The concrete representation of this type should be considered private, including pattern-matching usage; use the below functions for compatibility with future versions.</p></dd></dl><dl><dt class="spec type" id="type-any"><a href="#type-any" class="anchor"></a><code><span class="keyword">type</span> any</code><code> = </code><table class="variant"><tr id="type-any.Any" class="anchored"><td class="def constructor"><a href="#type-any.Any" class="anchor"></a><code>| </code><code><span class="constructor">Any</span> : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-any">any</a></code></td></tr></table></dt><dd><p><a href="index.html#type-t"><code>t</code></a> with existentially wrapped static type.</p></dd></dl><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dd><p><code>length t</code> is the number of fields used to represent <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : Stdlib.Format.formatter <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp ppf t</code> prints a human presentation of <code>t</code> on <code>ppf</code>.</p></dd></dl><dl><dt class="spec value" id="val-pp_any"><a href="#val-pp_any" class="anchor"></a><code><span class="keyword">val</span> pp_any : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-any">any</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_any ppf t</code> prints a human presentation of <code>t</code> on <code>ppf</code>.</p></dd></dl><dl><dt class="spec value" id="val-show"><a href="#val-show" class="anchor"></a><code><span class="keyword">val</span> show : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> string</code></dt><dd><p><code>show t</code> is a human presentation of <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-field"><a href="#val-field" class="anchor"></a><code><span class="keyword">val</span> field : <span><span class="type-var">'a</span> <a href="index.html#type-field">field</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>field ft</code> is a row of a single field of type <code>ft</code>. This function can be used when adding new field types; use the below functions otherwise.</p></dd></dl><dl><dt class="spec module" id="module-Std"><a href="#module-Std" class="anchor"></a><code><span class="keyword">module</span> <a href="Std/index.html">Std</a> : <a href="../Caqti_type_sig/index.html#module-type-Std">Caqti_type_sig.Std</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="../Caqti_type_sig/module-type-Std/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Standard type descriptors provided as a submodule for easy inclusion.</p></dd></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Caqti_type_sig/index.html#module-type-Std">Caqti_type_sig.Std</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>'a <a href="../Caqti_type_sig/module-type-Std/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt></dl><section><header><h4 id="composite"><a href="#composite" class="anchor"></a>Composite</h4><p>The following provides constructors for narrow tuple types; to describe wider tuple types, use nested application.</p></header><dl><dt class="spec value" id="val-option"><a href="#val-option" class="anchor"></a><code><span class="keyword">val</span> option : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span class="keyword">val</span> unit : <span>unit <a href="index.html#type-t">t</a></span></code></dt><dd><p>A holding no fields. This is used to pass no parameters and as the result for queries which does not return any rows. It can also be nested in tuples, in which case it will not contribute to the total number of fields.</p></dd></dl><dl><dt class="spec value" id="val-tup2"><a href="#val-tup2" class="anchor"></a><code><span class="keyword">val</span> tup2 : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates a pair type.</p></dd></dl><dl><dt class="spec value" id="val-tup3"><a href="#val-tup3" class="anchor"></a><code><span class="keyword">val</span> tup3 : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates a 3-tuple type.</p></dd></dl><dl><dt class="spec value" id="val-tup4"><a href="#val-tup4" class="anchor"></a><code><span class="keyword">val</span> tup4 : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'d</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Creates a 4-tuple type.</p></dd></dl><dl><dt class="spec value" id="val-custom"><a href="#val-custom" class="anchor"></a><code><span class="keyword">val</span> custom : <span>encode:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, string)</span> Stdlib.result</span>)</span></span> <span>&#45;&gt;</span> <span>decode:<span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, string)</span> Stdlib.result</span>)</span></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>custom ~encode ~decode rep</code> creates a custom type represented by <code>rep</code>, where <code>encode</code> is used to encode parameters into <code>rep</code> and <code>decode</code> is used to decode result rows from <code>rep</code>.</p><p><b>Note.</b> This should be considered experimental and may be revised or removed in a future version.</p></dd></dl></section><section><header><h4 id="singular"><a href="#singular" class="anchor"></a>Singular</h4></header><dl><dt class="spec value" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : <span>bool <a href="index.html#type-t">t</a></span></code></dt><dd><p>A boolean.</p></dd></dl><dl><dt class="spec value" id="val-int"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : <span>int <a href="index.html#type-t">t</a></span></code></dt><dd><p>An integer.</p></dd></dl><dl><dt class="spec value" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span class="keyword">val</span> int32 : <span>int32 <a href="index.html#type-t">t</a></span></code></dt><dd><p>A 32 bit integer.</p></dd></dl><dl><dt class="spec value" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span class="keyword">val</span> int64 : <span>int64 <a href="index.html#type-t">t</a></span></code></dt><dd><p>A 64 bit integer.</p></dd></dl><dl><dt class="spec value" id="val-float"><a href="#val-float" class="anchor"></a><code><span class="keyword">val</span> float : <span>float <a href="index.html#type-t">t</a></span></code></dt><dd><p>A float.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : <span>string <a href="index.html#type-t">t</a></span></code></dt><dd><p>An UTF-8 string. The database should accept UTF-8 if non-ASCII characters are present.</p></dd></dl><dl><dt class="spec value" id="val-octets"><a href="#val-octets" class="anchor"></a><code><span class="keyword">val</span> octets : <span>string <a href="index.html#type-t">t</a></span></code></dt><dd><p>A binary string.</p></dd></dl><dl><dt class="spec value" id="val-pdate"><a href="#val-pdate" class="anchor"></a><code><span class="keyword">val</span> pdate : <span>Ptime.t <a href="index.html#type-t">t</a></span></code></dt><dd><p>A date. This corresponds to the SQL <code>date</code> type.</p></dd></dl><dl><dt class="spec value" id="val-ptime"><a href="#val-ptime" class="anchor"></a><code><span class="keyword">val</span> ptime : <span>Ptime.t <a href="index.html#type-t">t</a></span></code></dt><dd><p>An absolute time with driver-dependent precision. This corresponds to an SQL <code>timestamp</code> type with UTC time zone.</p></dd></dl><dl><dt class="spec value" id="val-ptime_span"><a href="#val-ptime_span" class="anchor"></a><code><span class="keyword">val</span> ptime_span : <span>Ptime.span <a href="index.html#type-t">t</a></span></code></dt><dd><p>A period of time. If the database lacks a dedicated representation, the integer number of seconds is used.</p></dd></dl></section></details></div></div></div></section></div></body></html>